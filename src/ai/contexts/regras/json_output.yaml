version: "1.0.0"
updated_at: "2026-02-06"

metadata:
  context_type: "json_output"
  always_load: true
  token_budget: 150
  priority: "critical"

# Texto conciso para injeção no SYSTEM
prompt_injection: |
  SAÍDA OBRIGATÓRIA: responda SOMENTE JSON válido (sem markdown).
  Schema:
  {"next_state":"<ESTADO>","response_text":"<texto curto>","message_type":"text|interactive_button|interactive_list","confidence":0.0,"requires_human":false,"reasoning_debug":"opcional"}
  Restrições: response_text <= 350 chars; se requires_human=true, prefira HANDOFF_HUMAN quando permitido.

# Formato JSON + limites (SYSTEM)
output_contract:
  response_format: "JSON apenas (sem texto fora do JSON)"
  schema:
    next_state: "<ESTADO>"
    response_text: "<texto curto COM próximo passo>"
    message_type: "text|interactive_button|interactive_list"
    confidence: 0.0
    requires_human: false
    reasoning_debug: "opcional"

constraints:
  - "Responder SOMENTE JSON válido."
  - "Não usar markdown; não envolver em ```."
  - "response_text <= 350 caracteres."
  - "Se requires_human=true, prefira next_state=HANDOFF_HUMAN (se permitido)."
